# Example worflow diagrams for Puhuri

This directory contains a set of diagrams for the user access management worked on in the Puhuri project

# List of diagrams

## Simple registration - no integration to national system

 * user_registration_fed - User registration with federated AAI

![user_registration_fed](https://raw.githubusercontent.com/khappone/puhuri-ideas/master/diagrams/user_registration_fed.png)

 * user_registration_no_fed - User registration with catch-all AAI

![user_registration_no_fed](https://raw.githubusercontent.com/khappone/puhuri-ideas/master/diagrams/user_registration_no_fed.png)

 * project_create - Project creation, membeship management

![project_create](https://raw.githubusercontent.com/khappone/puhuri-ideas/master/diagrams/project_create.png)

 * resource_request - Resource request for project

![resource_request](https://raw.githubusercontent.com/khappone/puhuri-ideas/master/diagrams/resource_request.png)


## National portal integration

Option 1) National resource allocator controls identities

 * national_resource_allocation - Main workflows with national resource allocation portal

![national_resource_allocation](https://raw.githubusercontent.com/khappone/puhuri-ideas/master/diagrams/national_resource_allocation.png)

 * national_data_changes - Managing changing data with national resource allocation portal

![national_data_changes](https://raw.githubusercontent.com/khappone/puhuri-ideas/master/diagrams/national_data_changes.png)


Option 2) User controls their own identity
 
 * national_resource_allocation_alt - Main workflows with national resource allocation portal

![national_resource_allocation_alt](https://raw.githubusercontent.com/khappone/puhuri-ideas/master/diagrams/national_resource_allocation_alt.png)

* national_data_changes_alt - Managing changing data with national resource allocation portal

![national_data_changes_alt](https://raw.githubusercontent.com/khappone/puhuri-ideas/master/diagrams/national_data_changes_alt.png)


## User login diagrams

 * login_first - First login to LUMI

![login_first](https://raw.githubusercontent.com/khappone/puhuri-ideas/master/diagrams/login_first.png)

 * login - Login with an existing account

![login](https://raw.githubusercontent.com/khappone/puhuri-ideas/master/diagrams/login.png)

 * login_no_account - Login without an account

![login_no_account](https://raw.githubusercontent.com/khappone/puhuri-ideas/master/diagrams/login_no_account.png)

 * login_no_allocation - Login without an allocation

![login_no_allocation](https://raw.githubusercontent.com/khappone/puhuri-ideas/master/diagrams/login_no_allocation.png)

 * login_ssh_keys - Login with SSH keys

![login_ssh_keys](https://raw.githubusercontent.com/khappone/puhuri-ideas/master/diagrams/login_ssh_keys.png)

* object_storage_api - Login to the object storage API

![object_storage_api](https://raw.githubusercontent.com/khappone/puhuri-ideas/master/diagrams/object_storage_api.png)

* object_storage_web - Login to the object storage web interface

![object_storage_web](https://raw.githubusercontent.com/khappone/puhuri-ideas/master/diagrams/object_storage_web.png)

## Backend (service integration)
 * resource_allocation_sync_new - Sync resource allocations for a project which exist in the backed

![resource_allocation_sync_new](https://raw.githubusercontent.com/khappone/puhuri-ideas/master/diagrams/resource_allocation_sync_new.png)

 * resource_allocation_sync_existing - Sync resource allocations for a project which doesn't exist yet

![resource_allocation_sync_exsisting](https://raw.githubusercontent.com/khappone/puhuri-ideas/master/diagrams/resource_allocation_sync_exsisting.png)

 * membership_update - Update of project members

![membership_update](https://raw.githubusercontent.com/khappone/puhuri-ideas/master/diagrams/membership_update.png)

 * project_expiry - Project expiry

![project_expiry](https://raw.githubusercontent.com/khappone/puhuri-ideas/master/diagrams/project_expiry.png)

 * resource_use_report - Reporting resource use

![resource_use_report](https://raw.githubusercontent.com/khappone/puhuri-ideas/master/diagrams/resource_use_report.png)

